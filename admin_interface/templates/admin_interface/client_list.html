{% extends 'admin_interface/base_admin.html' %}

{% block title %}Gestion des Clients{% endblock %}

{% block content %}

<div class="container" style="max-width: 100%; padding: 20px;">
    <div class="flex-between" style="margin: 30px 0;">
        <h1 style="margin: 0;">üë• Gestion des Clients</h1>
        <a href="{% url 'admin_interface:client_create' %}" class="btn btn-add"> Ajouter</a>
    </div>

    <div class="table-wrapper">
        <table class="compact-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>T√©l.</th>
                    <th>Adresse compl√®te</th>
                    <th>Genre</th>
                    <th>Nationalit√©</th>
                    <th>Nom public</th>
                    <th>Naissance</th>
                    <th>Inscription</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for client in clients %}
                <tr>
                    <td><strong>{{ client.first_name }} {{ client.last_name }}</strong></td>
                    <td><span class="username-badge">@{{ client.username }}</span></td>
                    <td><a href="mailto:{{ client.email }}" class="email-link">{{ client.email }}</a></td>
                    <td>{{ client.profile.phone|default:"‚Äî" }}</td>
                    <td class="address-cell">
                        {% if client.profile.address %}
                            {{ client.profile.address }}<br>
                            <small>{{ client.profile.postal_code|default:"" }} {{ client.profile.city|default:"" }}</small>
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </td>
                    <td>
                        {% if client.profile.gender == 'M' %}M
                        {% elif client.profile.gender == 'F' %}F
                        {% elif client.profile.gender == 'O' %}‚ößÔ∏è
                        {% else %}‚Äî{% endif %}
                    </td>
                    <td>{{ client.profile.nationality|default:"‚Äî" }}</td>
                    <td>{{ client.profile.public_name|default:"‚Äî" }}</td>
                    <td>{{ client.profile.birth_date|date:"d/m/Y"|default:"‚Äî" }}</td>
                    <td><span class="date-badge">{{ client.date_joined|date:"d/m/Y" }}</span></td>
                    <td class="actions-cell">
                        <a href="{% url 'admin_interface:client_update' client.id %}" class="btn-sm btn-edit" title="Modifier">‚úèÔ∏è</a>
                        <a href="{% url 'admin_interface:client_delete' client.id %}" class="btn-sm btn-delete" title="Supprimer" onclick="return confirm('Supprimer ce client ?')">üóëÔ∏è</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="11" class="text-center" style="padding: 40px; color: #999;">
                        Aucun client trouv√©. Ajoutez-en un d√®s maintenant !
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<style>
    .table-wrapper {
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        overflow: hidden;
    }
    
    .compact-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 11px;
    }
    
    .compact-table thead {
        background: linear-gradient(135deg, #E8DCC5 0%, #d4c4a8 100%);
    }
    
    .compact-table th {
        padding: 10px 8px;
        text-align: left;
        font-weight: 600;
        font-size: 11px;
        color: #2c2c2c;
        white-space: nowrap;
        border-bottom: 2px solid #cbb896;
    }
    
    .compact-table td {
        padding: 8px 8px;
        border-bottom: 1px solid #f5f5f5;
        vertical-align: middle;
    }
    
    .compact-table tbody tr {
        transition: background-color 0.2s;
    }
    
    .compact-table tbody tr:hover {
        background-color: #fefbf6;
    }
    
    .username-badge {
        background: #f0f0f0;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 10px;
        color: #666;
        white-space: nowrap;
    }
    
    .email-link {
        color: #4A90E2;
        text-decoration: none;
        font-size: 11px;
    }
    
    .email-link:hover {
        text-decoration: underline;
    }
    
    .address-cell {
        max-width: 180px;
        line-height: 1.3;
    }
    
    .address-cell small {
        color: #999;
        font-size: 10px;
    }
    
    .date-badge {
        background: #f8f8f8;
        padding: 3px 6px;
        border-radius: 4px;
        font-size: 10px;
        white-space: nowrap;
    }
    
    .actions-cell {
        text-align: center;
        white-space: nowrap;
    }
    
    .btn-sm {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border-radius: 6px;
        text-decoration: none;
        font-size: 13px;
        transition: all 0.2s;
        margin: 0 2px;
    }
    
    .btn-edit {
        background: #fff;
        border: 1px solid #ddd;
    }
    
    .btn-edit:hover {
        background: #f0f0f0;
        transform: scale(1.1);
    }
    
    .btn-delete {
        background: #fff;
        border: 1px solid #ffcccc;
    }
    
    .btn-delete:hover {
        background: #ffe6e6;
        transform: scale(1.1);
    }
    
    /* Largeurs optimis√©es */
    .compact-table th:nth-child(1) { width: 10%; }
    .compact-table th:nth-child(2) { width: 8%; }
    .compact-table th:nth-child(3) { width: 13%; }
    .compact-table th:nth-child(4) { width: 8%; }
    .compact-table th:nth-child(5) { width: 15%; }
    .compact-table th:nth-child(6) { width: 5%; text-align: center; }
    .compact-table th:nth-child(7) { width: 9%; }
    .compact-table th:nth-child(8) { width: 9%; }
    .compact-table th:nth-child(9) { width: 8%; }
    .compact-table th:nth-child(10) { width: 8%; }
    .compact-table th:nth-child(11) { width: 7%; text-align: center; }
    
    .compact-table td:nth-child(6) { text-align: center; }
    
    /* Responsive - scroll horizontal seulement si n√©cessaire */
    @media (max-width: 1400px) {
        .table-wrapper {
            overflow-x: auto;
        }
    }
</style>

{% endblock %}